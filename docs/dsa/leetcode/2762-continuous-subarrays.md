# 2762. 不间断子数组

> 题目链接：<https://leetcode.cn/problems/continuous-subarrays/>

## 代码

<<< @/code/dsa/leetcode/2762-continuous-subarrays.ts

## 思路

滑动窗口 + 单调队列维护窗口内的最大值和最小值：

1. 使用两个单调队列：
   - `maxQ`：单调递减队列，维护窗口内的最大值（队首为最大值）
   - `minQ`：单调递增队列，维护窗口内的最小值（队首为最小值）

2. 对于每个右端点 `i`：
   - 将 `nums[i]` 加入两个队列，维护单调性
   - 当 `maxQ[0] - minQ[0] > 2` 时，收缩左边界 `left`，并更新队列
   - 以 `i` 为右端点的所有有效子数组数量为 `i - left + 1`

3. 累加所有右端点对应的子数组数量

- 时间复杂度 $O(n)$，每个元素最多入队和出队一次
- 空间复杂度 $O(n)$，单调队列最多存储 $n$ 个元素

